<ContentPage
    x:Class="DevNest.View.Home"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:Model="clr-namespace:DevNest.Model"
    xmlns:ViewModel="clr-namespace:DevNest.ViewModel"
    xmlns:view="clr-namespace:DevNest.View"
    Title="Home"
    x:DataType="ViewModel:HomeViewModel"
    BackgroundColor="{DynamicResource OffBlack}">

    <Grid>
        <!--  Main Content  -->
        <VerticalStackLayout Padding="16" Spacing="16">
            <CollectionView ItemsSource="{Binding Items}" SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="ViewModel:ItemViewModel">
                        <SwipeView>
                            <SwipeView.RightItems>
                                <SwipeItems>
                                    <SwipeItem
                                        BackgroundColor="Red"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type view:Home}}, Path=BindingContext.RemoveItemCommand}"
                                        CommandParameter="{Binding .}"
                                        Text="Delete" />
                                </SwipeItems>
                            </SwipeView.RightItems>
                            <VerticalStackLayout>
                                <Label Text="{Binding Name}">
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type view:Home}}, Path=BindingContext.ToggleExpandCommand}" CommandParameter="{Binding .}" />
                                    </Label.GestureRecognizers>
                                </Label>
                                <VerticalStackLayout IsVisible="{Binding IsExpanded}">
                                    <Label FontAttributes="Italic" Text="{Binding Description}" />
                                    <Label Text="{Binding FrameworksString}" />
                                </VerticalStackLayout>
                            </VerticalStackLayout>
                        </SwipeView>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>

        <!--  Floating Action Button  -->
        <Button
            Margin="24"
            BackgroundColor="DodgerBlue"
            Command="{Binding AddItemCommand}"
            CornerRadius="32"
            FontSize="32"
            HeightRequest="64"
            HorizontalOptions="End"
            Text="ï¼‹"
            TextColor="White"
            VerticalOptions="End"
            WidthRequest="64" />
    </Grid>
</ContentPage>
